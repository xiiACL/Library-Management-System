<!DOCTYPE html>
<html lang="ar" dir="rtl" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>🏃‍♂️ جدول الكارديو - وضع داكن</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 p-6 text-gray-200">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center text-green-400">🏃‍♂️ جدول الكارديو لمدة 4 أسابيع</h1>

    {% for i, week in enumerate(weeks, start=1) %}
      <section class="mb-8 bg-gray-800 p-4 rounded shadow-lg">
        <h2 class="text-xl font-semibold mb-4 border-b border-gray-700 pb-2 text-green-300">الأسبوع {{ i }}</h2>

        <div class="grid grid-cols-1 gap-4">
          {% for day in week %}
            {% set is_rest = day.duration == 0 %}
            <div class="p-4 rounded shadow-sm flex flex-col md:flex-row md:items-center md:justify-between
              {% if is_rest %}
                bg-gray-700 text-gray-400 italic
              {% else %}
                bg-gray-900
              {% endif %}
            ">
              <div>
                <div class="font-bold text-lg">
                  {{ day.day_name }} - {{ day.date }}
                  {% if not is_rest %}
                    - {{ day.duration }} دقيقة - متوسط - المقاومة {{ day.resistance }}
                  {% else %}
                    - راحة
                  {% endif %}
                </div>
                {% if entries.get(day.date) and not is_rest %}
                  <div class="mt-1 text-gray-300">
                    المسافة: <span class="font-medium">{{ entries[day.date].distance }}</span> كم &nbsp;|&nbsp;
                    الوقت: <span class="font-medium">{{ entries[day.date].time }}</span> دقيقة &nbsp;|&nbsp;
                    العداد: <span class="font-medium">{{ entries[day.date].odo }}</span> &nbsp;|&nbsp;
                    السعرات: <span class="font-medium">{{ entries[day.date].calories }}</span> كالوري
                  </div>
                {% elif not is_rest %}
                  <div class="mt-1 text-gray-500 italic">لم يتم تسجيل بيانات لهذا اليوم</div>
                {% endif %}

                {# هنا نضيف التقييم تحت كل يوم (لو في تقييم) #}
                {% if day.evaluation and not is_rest %}
                  <div class="mt-2 text-yellow-400 font-semibold">التقييم: {{ day.evaluation }}</div>
                {% endif %}
              </div>
              {% if not is_rest %}
              <div class="mt-3 md:mt-0">
                {% if entries.get(day.date) %}
                  <a href="{{ url_for('editryadh') }}?date={{ day.date }}"
                    class="inline-block px-4 py-2 bg-yellow-400 text-black rounded hover:bg-yellow-500 transition">✏️ تعديل</a>
                {% else %}
                  <a href="{{ url_for('editryadh') }}?date={{ day.date }}"
                    class="inline-block px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition">➕ تسجيل</a>
                {% endif %}
              </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>

        <div class="mt-4 text-right font-semibold text-green-500">
          🧮 مجموع وقت الأسبوع: {{ weekly_summaries[i-1] }} دقيقة<br>
          🔥 مجموع السعرات: {{ weekly_calories[i-1] }} كالوري<br>
          🛣️ مجموع المسافة: {{ weekly_distances[i-1] }} كم
        </div>
      </section>
    {% endfor %}
  </div>
</body>
</html>
